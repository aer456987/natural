(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2895c5ce"],{"0e54":function(t,e,c){"use strict";var s=c("7a23"),a={class:"px-lg-5 py-5"},r={class:"position-relative m-5"},o={class:"progress"},n=Object(s["h"])("i",{class:"bi bi-cart4"},null,-1),l=Object(s["h"])("i",{class:"bi bi-card-list"},null,-1),i=Object(s["h"])("i",{class:"bi bi-card-checklist"},null,-1),u=Object(s["h"])("i",{class:"bi bi-credit-card"},null,-1);function b(t,e,c,b,d,p){return Object(s["t"])(),Object(s["d"])("div",a,[Object(s["h"])("div",r,[Object(s["h"])("div",o,[Object(s["h"])("div",{class:"progress-bar bg-primary",role:"progressbar",style:"width: ".concat(c.progressValue,"%"),"aria-valuenow":c.progressValue,"aria-valuemin":"0","aria-valuemax":"100"},null,12,["aria-valuenow"])]),Object(s["h"])("div",{class:["progress_style position-absolute top-0 start-0 translate-middle",{progress_active:0===c.progressValue,"bg-primary":c.progressValue>1}]},[n],2),Object(s["h"])("div",{class:["progress_style position-absolute top-0 start-33 translate-middle",{progress_active:33===c.progressValue,"bg-primary":c.progressValue>33}]},[l],2),Object(s["h"])("div",{class:["progress_style position-absolute top-0 start-66 translate-middle",{progress_active:66===c.progressValue,"bg-primary":c.progressValue>66}]},[i],2),Object(s["h"])("div",{class:["progress_style position-absolute top-0 start-100 translate-middle",{progress_active:100===c.progressValue}]},[u],2)])])}var d={name:"CartProgress",props:["progressValue"]};d.render=b;e["a"]=d},"1dde":function(t,e,c){var s=c("d039"),a=c("b622"),r=c("2d00"),o=a("species");t.exports=function(t){return r>=51||!s((function(){var e=[],c=e.constructor={};return c[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"30b7":function(t,e,c){"use strict";c("3418")},3418:function(t,e,c){},"65f0":function(t,e,c){var s=c("861d"),a=c("e8b5"),r=c("b622"),o=r("species");t.exports=function(t,e){var c;return a(t)&&(c=t.constructor,"function"!=typeof c||c!==Array&&!a(c.prototype)?s(c)&&(c=c[o],null===c&&(c=void 0)):c=void 0),new(void 0===c?Array:c)(0===e?0:e)}},8418:function(t,e,c){"use strict";var s=c("c04e"),a=c("9bf2"),r=c("5c6c");t.exports=function(t,e,c){var o=s(e);o in t?a.f(t,o,r(0,c)):t[o]=c}},"99af":function(t,e,c){"use strict";var s=c("23e7"),a=c("d039"),r=c("e8b5"),o=c("861d"),n=c("7b0b"),l=c("50c4"),i=c("8418"),u=c("65f0"),b=c("1dde"),d=c("b622"),p=c("2d00"),h=d("isConcatSpreadable"),g=9007199254740991,j="Maximum allowed index exceeded",O=p>=51||!a((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),f=b("concat"),v=function(t){if(!o(t))return!1;var e=t[h];return void 0!==e?!!e:r(t)},y=!O||!f;s({target:"Array",proto:!0,forced:y},{concat:function(t){var e,c,s,a,r,o=n(this),b=u(o,0),d=0;for(e=-1,s=arguments.length;e<s;e++)if(r=-1===e?o:arguments[e],v(r)){if(a=l(r.length),d+a>g)throw TypeError(j);for(c=0;c<a;c++,d++)c in r&&i(b,d,r[c])}else{if(d>=g)throw TypeError(j);i(b,d++,r)}return b.length=d,b}})},b789:function(t,e,c){"use strict";c.r(e);var s=c("7a23"),a={class:"container pageContent"},r={class:"py-4"},o={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb"},n={class:"breadcrumb m-0"},l={class:"breadcrumb-item"},i=Object(s["g"])("線上商城"),u=Object(s["h"])("li",{class:"breadcrumb-item active","aria-current":"page"},"購物車",-1),b=Object(s["h"])("h1",{class:"text-center fw-bold mb-4"},"購物車",-1),d={class:"container"},p={class:"row px-lg-0 px-xl-5 position-relative"},h={class:"col-12 table_style bg-white mb-5 p-5 text-center rounded-3 shadow"},g={key:0,class:"row justify-content-center py-4"},j={class:"col-12 col-md-5"},O=Object(s["h"])("h3",{class:"mb-3"},"購物車內沒有商品",-1),f=Object(s["g"])("前往選購"),v={class:"table position-relative"},y=Object(s["h"])("thead",null,[Object(s["h"])("tr",null,[Object(s["h"])("td",{width:"30%",scope:"col",class:"py-3 fs-5",colspan:"2"},"商品資訊"),Object(s["h"])("td",{width:"23%",scope:"col",class:"py-3 fs-5"},"數量"),Object(s["h"])("td",{width:"22%",scope:"col",class:"py-3 fs-5"},"金額"),Object(s["h"])("td",{width:"10%",scope:"col",class:"py-3 fs-5"})])],-1),m={class:"cart_img"},x={scope:"row"},_={class:"d-flex justify-content-center"},w={class:"input-group",style:{"max-width":"180px"}},C={class:"form-control text-center border"},S=Object(s["h"])("span",null,"NT $",-1),k={class:"h5 text-end text-danger"},V={key:0,class:"col-12 d-flex justify-content-between mb-5"},A=Object(s["g"])(" ◁ 繼續購物 "),J=Object(s["g"])(" 填寫訂單 ▷ ");function q(t,e,c,q,B,$){var N=Object(s["y"])("Loading"),T=Object(s["y"])("router-link"),P=Object(s["y"])("Progress");return Object(s["t"])(),Object(s["d"])(s["a"],null,[Object(s["h"])(N,{status:B.loadingStatus},null,8,["status"]),Object(s["h"])("section",a,[Object(s["h"])("section",r,[Object(s["h"])("nav",o,[Object(s["h"])("ol",n,[Object(s["h"])("li",l,[Object(s["h"])(T,{to:"/products",class:"link-secondary"},{default:Object(s["J"])((function(){return[i]})),_:1})]),u])]),Object(s["h"])(P,{"progress-value":B.progressNum},null,8,["progress-value"]),b,Object(s["h"])("div",d,[Object(s["h"])("main",p,[Object(s["h"])("div",h,[B.btnStatus?(Object(s["t"])(),Object(s["d"])("div",g,[Object(s["h"])("span",j,[O,Object(s["h"])(T,{to:"/products",class:"btn btn_main w-100"},{default:Object(s["J"])((function(){return[f]})),_:1})])])):(Object(s["t"])(),Object(s["d"])(s["a"],{key:1},[Object(s["h"])("table",v,[y,Object(s["h"])("tbody",null,[(Object(s["t"])(!0),Object(s["d"])(s["a"],null,Object(s["x"])(B.carts.carts,(function(t){return Object(s["t"])(),Object(s["d"])("tr",{key:t.id},[Object(s["h"])("td",m,[Object(s["h"])("img",{class:"w-100",src:t.product.imageUrl,alt:"預覽"},null,8,["src"])]),Object(s["h"])("td",x,Object(s["B"])(t.product.title),1),Object(s["h"])("td",null,[Object(s["h"])("div",_,[Object(s["h"])("div",w,[Object(s["h"])("span",{class:"btn_light_green px-2",onClick:function(e){return $.putCart("reduce",t)}}," - ",8,["onClick"]),Object(s["h"])("div",C,Object(s["B"])(t.qty),1),Object(s["h"])("div",{class:"btn_light_green px-2",onClick:function(e){return $.putCart("add",t)}}," + ",8,["onClick"])])])]),Object(s["h"])("td",null,[S,Object(s["g"])(Object(s["B"])(t.final_total),1)]),Object(s["h"])("td",null,[Object(s["h"])("i",{class:"bi bi-x-lg btn_red",onClick:function(e){return $.delCart("one",t)}},null,8,["onClick"])])])})),128))])]),Object(s["h"])("p",k," 總金額NT $"+Object(s["B"])(B.carts.total),1)],64))]),B.btnStatus?Object(s["e"])("",!0):(Object(s["t"])(),Object(s["d"])("div",V,[Object(s["h"])(T,{to:"/products",class:"btn btn_outline_green px-3 py-1"},{default:Object(s["J"])((function(){return[A]})),_:1}),Object(s["h"])("button",{type:"button",class:"btn btn-outline-danger px-3 py-1",onClick:e[1]||(e[1]=function(t){return $.delCart("all")})}," 清空購物車 "),Object(s["h"])(T,{to:"/square/order",class:["btn btn_main px-3 py-1",{disabled:B.btnStatus}]},{default:Object(s["J"])((function(){return[J]})),_:1},8,["class"])]))])])])])],64)}c("99af");var B=c("4897"),$=c("0e54"),N={name:"Cart",data:function(){return{loadingStatus:!1,btnStatus:!0,progressNum:0,carts:{}}},components:{Progress:$["a"]},methods:{getCarts:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("toriha_vuetestapi","/cart");this.loadingStatus=!0,this.$http.get(e).then((function(e){e.data.success?(console.log("(成功-前台)取得購物車全部資料 res:",e),t.carts=e.data.data,e.data.data.carts.length>0?t.btnStatus=!1:t.btnStatus=!0,t.loadingStatus=!1,console.log("(成功-前台)取得購物車全部資料 vue:",t.carts)):(console.log("(錯誤-前台)取得購物車全部資料 res:",e),t.loadingStatus=!1)})).catch((function(e){console.log("(失敗-前台)取得購物車全部資料 err:"),console.dir(e),t.loadingStatus=!1}))},delCart:function(t,e){var c=this,s="",a="";this.loadingStatus=!0,"all"===t?(s="".concat("https://vue3-course-api.hexschool.io","/api/").concat("toriha_vuetestapi","/carts"),a="全部商品",console.log("刪除全部",s)):"one"===t&&(s="".concat("https://vue3-course-api.hexschool.io","/api/").concat("toriha_vuetestapi","/cart/").concat(e.id),a=e.product.title,console.log(e)),this.$http.delete(s).then((function(t){t.data.success?(console.log("(成功-前台)刪除購物車 res:",t),console.log("(成功-前台)刪除購物車 vue:",c.carts),Object(B["b"])("".concat(a," ").concat(t.data.message),"success"),c.getCarts()):(console.log("(錯誤-前台)刪除購物車 res:",t),Object(B["b"])(t.data.message,"error"),c.loadingStatus=!1)})).catch((function(t){console.log("(失敗-前台)刪除購物車 err:"),console.dir(t),Object(B["b"])(t.data.message,"error"),c.loadingStatus=!1}))},putCart:function(t,e){var c=this;this.loadingStatus=!0;var s="".concat("https://vue3-course-api.hexschool.io","/api/").concat("toriha_vuetestapi","/cart/").concat(e.id),a=e.qty;if("reduce"===t){if(e.qty<2)return Object(B["b"])("數量不可少於 1","error"),void(this.loadingStatus=!1);a-=1}else"add"===t&&(a+=1);var r={data:{product_id:e.product_id,qty:a}};this.$http.put(s,r).then((function(t){t.data.success?(console.log("(成功-前台)修改購物車 res:",t),Object(B["b"])(t.data.message,"success"),c.getCarts()):(console.log("(錯誤-前台)修改購物車 res:",t),Object(B["b"])(t.data.message,"error"),c.loadingStatus=!1)})).catch((function(t){console.log("(失敗-前台)修改購物車 err:"),console.dir(t),c.loadingStatus=!1}))}},mounted:function(){this.getCarts()}};c("30b7");N.render=q;e["default"]=N},e8b5:function(t,e,c){var s=c("c6b6");t.exports=Array.isArray||function(t){return"Array"==s(t)}}}]);
//# sourceMappingURL=chunk-2895c5ce.34955f60.js.map