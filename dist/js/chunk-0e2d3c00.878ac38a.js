(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e2d3c00"],{"159b":function(t,e,c){var o=c("da84"),a=c("fdbc"),n=c("17c2"),l=c("9112");for(var i in a){var s=o[i],r=s&&s.prototype;if(r&&r.forEach!==n)try{l(r,"forEach",n)}catch(d){r.forEach=n}}},"17c2":function(t,e,c){"use strict";var o=c("b727").forEach,a=c("a640"),n=a("forEach");t.exports=n?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},"8d66":function(t,e,c){"use strict";c.r(e);var o=c("7a23"),a={class:"container pageContent py-5 overflow-hidden"},n=Object(o["h"])("h2",{class:"h1 text-center fw-bold m-0 pb-5"}," 商品管理 ",-1),l={class:"row justify-content-between pb-2"},i={class:"col-md-8 col-lg-6 pb-1"},s={class:"row"},r={class:"col-6 col-lg-6 col-xl-4"},d=Object(o["f"])('<option value="全部商品" selected>全部商品</option><option value="募款專案">募款專案</option><option value="公益活動">公益活動</option><option value="講座">講座</option><option value="有機食品">有機食品</option><option value="環保商品">環保商品</option>',6),u={class:"col-6 col-lg-6 col-xl-5"},h={class:"input-group"},b=Object(o["h"])("label",{for:"productsSearch",class:"input-group-text"},[Object(o["h"])("i",{class:"bi bi-search fs-6"})],-1),m={class:"col-md-4 col-lg-6 text-end pb-1"},p=Object(o["h"])("i",{class:"bi bi-arrow-counterclockwise"},null,-1),f={class:"table-responsive"},g={class:"table table-hover text-center text-break\n          rounded overflow-hidden shadow-sm"},O=Object(o["h"])("thead",{class:"table-dark align-middle"},[Object(o["h"])("tr",null,[Object(o["h"])("td",{width:"10%"},"分類"),Object(o["h"])("td",{width:"8%"},"圖片"),Object(o["h"])("td",{width:"20%"},"產品ID"),Object(o["h"])("td",{width:"20%"},"品名"),Object(o["h"])("td",{width:"9%"},"原價"),Object(o["h"])("td",{width:"9%"},"售價"),Object(o["h"])("td",{width:"8%"},"狀態"),Object(o["h"])("td",{width:"8%"},"操作"),Object(o["h"])("td",{width:"8%"},"刪除")])],-1),j={"data-title":"分類"},v={"data-title":"圖片"},w={"data-title":"產品ID"},P={"data-title":"品名"},S={"data-title":"售價"},I={"data-title":"售價"},k={"data-title":"操作"},y={"data-title":"刪除"},x={class:"text-center mt-1"};function U(t,e,c,U,D,M){var _=Object(o["A"])("DashboardLoading"),V=Object(o["A"])("DashboardPagination"),C=Object(o["A"])("DashboardProductModal");return Object(o["v"])(),Object(o["d"])(o["a"],null,[Object(o["h"])(_,{status:D.loadingStatus},null,8,["status"]),Object(o["h"])("section",a,[n,Object(o["h"])("div",l,[Object(o["h"])("div",i,[Object(o["h"])("div",s,[Object(o["h"])("div",r,[Object(o["N"])(Object(o["h"])("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=function(t){return D.productSelect=t})},[d],512),[[o["I"],D.productSelect]])]),Object(o["h"])("div",u,[Object(o["h"])("div",h,[Object(o["N"])(Object(o["h"])("input",{type:"search",class:"form-control",placeholder:"請輸入品名","aria-label":"search","aria-describedby":"basic-addon1",id:"productsSearch","onUpdate:modelValue":e[2]||(e[2]=function(t){return D.productSearch=t})},null,512),[[o["J"],D.productSearch]]),b])])])]),Object(o["h"])("div",m,[Object(o["h"])("button",{class:"btn btn-brown-500  ",onClick:e[3]||(e[3]=function(t){return M.openModal(!0)})}," 新增產品 "),Object(o["h"])("button",{type:"button",class:"btn btn-outline-brown-500 btn-sm fs-5 ms-1",onClick:e[4]||(e[4]=function(){return M.resetData&&M.resetData.apply(M,arguments)})},[p])])]),Object(o["h"])("main",f,[Object(o["h"])("table",g,[O,Object(o["h"])("tbody",null,[(Object(o["v"])(!0),Object(o["d"])(o["a"],null,Object(o["z"])(M.filterProducts,(function(e){return Object(o["v"])(),Object(o["d"])("tr",{key:e.id},[Object(o["h"])("td",j,Object(o["D"])(e.category),1),Object(o["h"])("td",v,[Object(o["h"])("img",{class:"w-100",src:e.imageUrl,alt:"product.title"},null,8,["src"])]),Object(o["h"])("td",w,Object(o["D"])(e.id),1),Object(o["h"])("td",P,Object(o["D"])(e.title),1),Object(o["h"])("td",S," $ "+Object(o["D"])(t.$filters.currency(e.origin_price)),1),Object(o["h"])("td",I," $ "+Object(o["D"])(t.$filters.currency(e.price)),1),Object(o["h"])("td",{"data-title":"狀態",class:{"text-warning-dark":e.is_enabled,"text-gray":!e.is_enabled}},Object(o["D"])(e.is_enabled?"上架":"未上架"),3),Object(o["h"])("td",k,[Object(o["h"])("button",{class:"btn btn-outline-brown-500 px-2 py-1",onClick:function(t){return M.openModal(!1,e)}}," 修改 ",8,["onClick"])]),Object(o["h"])("td",y,[Object(o["h"])("i",{class:"bi bi-trash-fill btn btn-outline-danger",onClick:function(t){return M.delProductFn(e)}},null,8,["onClick"])])])})),128))])])]),Object(o["h"])(V,{"pagination-isShow":D.isPaginationShow,"pagination-page":D.productPagination,onGetData:M.getProducts},null,8,["pagination-isShow","pagination-page","onGetData"]),Object(o["h"])("p",x,Object(o["D"])("共有 ".concat(M.filterProducts.length," 筆資料")),1),Object(o["h"])(C,{ref:"productModal","modal-product":D.tempProduct,"modal-isNew":D.isNew,"modal-btn-status":D.btnStatus,onModalUpdateProduct:M.updateProduct},null,8,["modal-product","modal-isNew","modal-btn-status","onModalUpdateProduct"])])],64)}c("99af"),c("b64b"),c("159b"),c("4de4"),c("ac1f"),c("466d");var D=c("4897"),M=c("6718"),_=c("dd6c"),V=(c("a4d3"),c("e01a"),{class:"modal fade m-0",id:"productModal",tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false",ref:"modal"}),C={class:"modal-dialog modal-dialog-centered width_xl"},F={class:"modal-content"},N={class:"modal-header bg-warning text-brown-500"},$={class:"h5 modal-title",id:"productModalLabel"},A=Object(o["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),B={class:"modal-body"},E={class:"btn-group d-block text-center mb-2",role:"group","aria-label":"編輯表單切換"},J=Object(o["h"])("label",{class:"btn btn-outline-brown-500",for:"productMessage"}," 編輯資訊 ",-1),q=Object(o["h"])("label",{class:"btn btn-outline-brown-500",for:"productImg"}," 編輯圖片 ",-1),T={class:"row"},G={class:"col-12"},L=Object(o["h"])("label",{for:"modalName",class:"form-label p-1 m-0"},[Object(o["g"])(" 品名"),Object(o["h"])("span",{class:"text-danger fw-bold"},"*")],-1),R={class:"col-12 col-md-6"},z=Object(o["h"])("label",{for:"modalCategory",class:"form-label p-1 m-0"},[Object(o["g"])(" 產品分類"),Object(o["h"])("span",{class:"text-danger fw-bold"},"*")],-1),H=Object(o["h"])("option",{value:"",selected:"",disabled:""},"請選擇分類",-1),K=Object(o["h"])("option",{value:"募款專案"},"募款專案",-1),Q=Object(o["h"])("option",{value:"公益活動"},"公益活動",-1),W=Object(o["h"])("option",{value:"講座"},"講座",-1),X=Object(o["h"])("option",{value:"有機食品"},"有機食品",-1),Y=Object(o["h"])("option",{value:"環保商品"},"環保商品",-1),Z={class:"col-12 col-md-6"},tt=Object(o["h"])("label",{for:"modalUnit",class:"form-label p-1 m-0"},[Object(o["g"])(" 單位"),Object(o["h"])("span",{class:"text-danger fw-bold"},"*")],-1),et={class:"col-12 col-md-6"},ct=Object(o["h"])("label",{for:"modalOriginPrice",class:"form-label p-1 m-0"},[Object(o["g"])(" 原價"),Object(o["h"])("span",{class:"text-danger fw-bold"},"*")],-1),ot={class:"col-12 col-md-6"},at=Object(o["h"])("label",{for:"modalPrice",class:"form-label p-1 m-0"},[Object(o["g"])(" 售價"),Object(o["h"])("span",{class:"text-danger fw-bold"},"*")],-1),nt={class:"col-12 col-md-6"},lt=Object(o["h"])("label",{for:"modalDescription",class:"form-label p-1 m-0"}," 產品重點描述 ",-1),it={class:"col-12 col-md-6"},st=Object(o["h"])("label",{for:"modalContentSupplement",class:"form-label p-1 m-0"}," 次要文案內容 ",-1),rt={class:"col-12"},dt=Object(o["h"])("label",{for:"modalContent",class:"form-label p-1 m-0"}," 主要文案內容 ",-1),ut=Object(o["h"])("p",{class:"text-danger text-end fw-bold"}," * 為必填項目 ",-1),ht={class:"col-12 form-check\n              d-flex justify-content-end align-items-center"},bt=Object(o["h"])("label",{for:"enabled_status"}," 是否上架商品 ",-1),mt={class:"modal-footer"},pt=Object(o["h"])("button",{type:"button",class:"btn btn-outline-brown-500","data-bs-dismiss":"modal"}," 關閉 ",-1);function ft(t,e,c,a,n,l){var i=Object(o["A"])("Field"),s=Object(o["A"])("ErrorMessage"),r=Object(o["A"])("Form"),d=Object(o["A"])("DashboardRenderImgs");return Object(o["v"])(),Object(o["d"])("section",V,[Object(o["h"])("section",C,[Object(o["h"])("main",F,[Object(o["h"])("div",N,[Object(o["h"])("h3",$,Object(o["D"])(c.modalIsNew?"新增產品":"編輯產品"),1),A]),Object(o["h"])("section",B,[Object(o["h"])("div",E,[Object(o["h"])("input",{type:"radio",class:"btn-check",name:"產品資訊切換功能",id:"productMessage",autocomplete:"off",checked:!n.isShow,onClick:e[1]||(e[1]=function(t){return n.isShow=!1})},null,8,["checked"]),J,Object(o["h"])("input",{type:"radio",class:"btn-check",name:"產品資訊切換功能",id:"productImg",autocomplete:"off",onClick:e[2]||(e[2]=function(t){return n.isShow=!0})}),q]),Object(o["h"])("div",T,[Object(o["h"])("div",{class:["col-12",{"d-none":n.isShow}]},[Object(o["h"])(r,{ref:"productForm",class:"row",onChange:l.checkInputValue},{default:Object(o["M"])((function(t){var c=t.errors;return[Object(o["h"])("div",G,[L,Object(o["h"])(i,{type:"text",name:"品名",placeholder:"請輸入品名",id:"modalName",class:["form-control mb-2",{"is-invalid":c["品名"]}],rules:"required",modelValue:n.tempProduct.title,"onUpdate:modelValue":e[3]||(e[3]=function(t){return n.tempProduct.title=t})},null,8,["class","modelValue"]),Object(o["h"])(s,{name:"品名",class:"invalid-feedback mb-1"})]),Object(o["h"])("div",R,[z,Object(o["h"])(i,{as:"select",name:"產品分類",id:"modalCategory",class:["form-select mb-2",{"is-invalid":c["產品分類"]}],rules:"required",modelValue:n.tempProduct.category,"onUpdate:modelValue":e[4]||(e[4]=function(t){return n.tempProduct.category=t})},{default:Object(o["M"])((function(){return[H,K,Q,W,X,Y]})),_:2},1032,["class","modelValue"]),Object(o["h"])(s,{name:"產品分類",class:"invalid-feedback mb-1"})]),Object(o["h"])("div",Z,[tt,Object(o["h"])(i,{type:"text",name:"單位",placeholder:"請輸入單位",id:"modalUnit",class:["form-control mb-2",{"is-invalid":c["單位"]}],rules:"required",modelValue:n.tempProduct.unit,"onUpdate:modelValue":e[5]||(e[5]=function(t){return n.tempProduct.unit=t})},null,8,["class","modelValue"]),Object(o["h"])(s,{name:"單位",class:"invalid-feedback mb-1"})]),Object(o["h"])("div",et,[ct,Object(o["h"])(i,{type:"number",min:"1",name:"原價",id:"modalOriginPrice",class:["form-control mb-2",{"is-invalid":c["原價"]}],rules:"required|numeric",modelValue:n.tempProduct.origin_price,"onUpdate:modelValue":e[6]||(e[6]=function(t){return n.tempProduct.origin_price=t}),modelModifiers:{number:!0}},null,8,["class","modelValue"]),Object(o["h"])(s,{name:"原價",class:"invalid-feedback mb-1"})]),Object(o["h"])("div",ot,[at,Object(o["h"])(i,{type:"number",min:"1",name:"售價",id:"modalPrice",class:["form-control mb-2",{"is-invalid":c["售價"]}],rules:"required|numeric",modelValue:n.tempProduct.price,"onUpdate:modelValue":e[7]||(e[7]=function(t){return n.tempProduct.price=t}),modelModifiers:{number:!0}},null,8,["class","modelValue"]),Object(o["h"])(s,{name:"售價",class:"invalid-feedback mb-1"})]),Object(o["h"])("div",nt,[lt,Object(o["N"])(Object(o["h"])("textarea",{id:"modalDescription",rows:"4",class:"form-control mb-2",placeholder:"請輸入產品描述","onUpdate:modelValue":e[8]||(e[8]=function(t){return n.tempProduct.description=t})},null,512),[[o["J"],n.tempProduct.description]])]),Object(o["h"])("div",it,[st,Object(o["N"])(Object(o["h"])("textarea",{id:"modalContentSupplement",rows:"4",class:"form-control mb-2",placeholder:"請輸入次要文案內容","onUpdate:modelValue":e[9]||(e[9]=function(t){return n.tempProduct.content_supplement=t})},null,512),[[o["J"],n.tempProduct.content_supplement]])]),Object(o["h"])("div",rt,[dt,Object(o["N"])(Object(o["h"])("textarea",{id:"modalContent",rows:"5",class:"form-control mb-2",placeholder:"請輸入主要文案內容","onUpdate:modelValue":e[10]||(e[10]=function(t){return n.tempProduct.content=t})},null,512),[[o["J"],n.tempProduct.content]])]),ut]})),_:1},8,["onChange"])],2),Object(o["h"])("div",{class:["col-12",{"d-none":!n.isShow}]},[Object(o["h"])(d,{ref:"renderImg","product-main-img":n.tempProduct.imageUrl,"product-imgs":n.tempProduct.imagesUrl,onUpdataImgDatas:l.updateImgs},null,8,["product-main-img","product-imgs","onUpdataImgDatas"])],2)]),Object(o["h"])("div",ht,[Object(o["N"])(Object(o["h"])("input",{type:"checkbox",id:"enabled_status",name:"啟用狀態",value:"啟用狀態",class:"form-check-input me-1","onUpdate:modelValue":e[11]||(e[11]=function(t){return n.tempProduct.is_enabled=t})},null,512),[[o["G"],n.tempProduct.is_enabled]]),bt])]),Object(o["h"])("div",mt,[pt,Object(o["h"])("button",{type:"button",class:"btn btn-warning text-brown-500",disabled:n.newBtnStatus,onClick:e[12]||(e[12]=function(e){return t.$emit("modalUpdateProduct",n.tempProduct)})},Object(o["D"])(c.modalIsNew?"確定新增":"儲存變更"),9,["disabled"])])])])],512)}var gt=c("7c2b"),Ot=c.n(gt),jt=(c("a434"),{class:"col-6 col-md-3"}),vt=Object(o["h"])("label",{for:"modalImg",class:"form-label p-1 m-0"},[Object(o["g"])(" 主要圖片"),Object(o["h"])("span",{class:"text-danger fw-bold"},"*")],-1),wt={class:"position-relative"},Pt={class:"row"},St={class:"col-6 mb-1"},It={class:"col-6 mb-1"};function kt(t,e,c,a,n,l){var i=Object(o["A"])("Field"),s=Object(o["A"])("ErrorMessage"),r=Object(o["A"])("Form"),d=Object(o["A"])("DashboardUpdateFile");return Object(o["v"])(),Object(o["d"])(o["a"],null,[Object(o["h"])(r,{ref:"productImgsForm"},{default:Object(o["M"])((function(c){var a=c.errors;return[Object(o["h"])("ul",{class:"row list-unstyled height_xl overflow-auto",onChange:e[2]||(e[2]=function(e){return t.$emit("updataImgDatas",n.tempMainImg,n.tempImgs)})},[Object(o["h"])("li",jt,[vt,Object(o["h"])(i,{type:"text",name:"主要圖片網址",placeholder:"請輸入主圖網址",id:"modalImg",class:["form-control mb-2",{"is-invalid":a["主要圖片網址"]}],rules:"required",modelValue:n.tempMainImg,"onUpdate:modelValue":e[1]||(e[1]=function(t){return n.tempMainImg=t})},null,8,["class","modelValue"]),Object(o["h"])(s,{name:"主要圖片網址",class:"invalid-feedback mb-1"}),Object(o["h"])("img",{src:n.tempMainImg,alt:"主要圖片",class:"w-100"},null,8,["src"])]),n.tempImgs?(Object(o["v"])(!0),Object(o["d"])(o["a"],{key:0},Object(o["z"])(n.tempImgs,(function(t,e){return Object(o["v"])(),Object(o["d"])("li",{key:"多圖_".concat(e+1),class:"col-6 col-md-3"},[Object(o["h"])("label",{for:"moreImg_".concat(e+1),class:"form-label p-1 m-0"},Object(o["D"])("圖片".concat(e+1)),9,["for"]),Object(o["h"])(i,{type:"text",name:"圖片網址_".concat(e+1),placeholder:"請輸入圖片網址",id:"moreImg_".concat(e+1),class:["form-control mb-2",{"is-invalid":a["圖片網址_".concat(e+1)]}],rules:"min:1",modelValue:n.tempImgs[e],"onUpdate:modelValue":function(t){return n.tempImgs[e]=t}},null,8,["name","id","class","modelValue","onUpdate:modelValue"]),Object(o["h"])(s,{name:"圖片網址_".concat(e+1),class:"invalid-feedback mb-1"},null,8,["name"]),Object(o["h"])("div",wt,[Object(o["h"])("i",{class:"bi bi-x-lg fs-6\n                btn btn-dark rounded-0\n                p-1 position-absolute end-0",onClick:function(t){return n.tempImgs.splice(e,1)}},null,8,["onClick"]),Object(o["h"])("img",{src:t,alt:"圖片_".concat(e+1),class:"w-100 mb-2"},null,8,["src","alt"])])])})),128)):Object(o["e"])("",!0)],32)]})),_:1},512),Object(o["h"])("div",Pt,[Object(o["h"])("div",St,[Object(o["h"])(d,{onUploadImgFile:l.uploadNewImg},null,8,["onUploadImgFile"])]),Object(o["h"])("div",It,[Object(o["h"])("button",{class:["btn btn-brown w-100",{disabled:""===n.tempMainImg||""===n.tempImgs[n.tempImgs.length-1]}],onClick:e[3]||(e[3]=function(t){return n.tempImgs.push("")})}," 新增圖片 ",2)])])],64)}var yt={class:"input-group"},xt={key:0,class:"spinner-border spinner-border-sm",role:"status"};function Ut(t,e,c,a,n,l){return Object(o["v"])(),Object(o["d"])("div",yt,[Object(o["h"])("input",{type:"file",placeholder:"請輸入圖片連結",class:"form-control",id:"file",ref:"fileInput",onChange:e[1]||(e[1]=function(t){return n.isValue=!0})},null,544),Object(o["h"])("button",{type:"button",class:["input-group-text btn btn-outline-brown",{disabled:!n.isValue}],onClick:e[2]||(e[2]=function(){return l.upload&&l.upload.apply(l,arguments)})},[n.isUpload?(Object(o["v"])(),Object(o["d"])("span",xt)):Object(o["e"])("",!0),Object(o["g"])(" "+Object(o["D"])(n.isUpload?"檔案上傳中":"上傳圖片"),1)],2)])}var Dt={name:"DashboardUpdateFile",data:function(){return{isValue:!1,isUpload:!1}},emits:["uploadImgFile"],methods:{upload:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("toriha_vuetestapi","/admin/upload"),c=this.$refs.fileInput.files[0],o=new FormData;this.isUpload=!0,o.append("file-to-upload",c),this.$http.post(e,o).then((function(e){e.data.success?(t.$emit("uploadImgFile",e.data.imageUrl),t.$refs.fileInput.value="",t.isValue=!1,t.isUpload=!1,Object(D["f"])("圖片上傳成功","success")):(t.isUpload=!1,Object(D["f"])(e.data.message,"error"))})).catch((function(){Object(D["d"])("圖片上傳失敗","請重新操作"),t.isUpload=!1}))}},mounted:function(){}};Dt.render=Ut;var Mt=Dt,_t={name:"DashboardRenderImgs",data:function(){return{tempMainImg:"",tempImgs:[]}},props:["productMainImg","productImgs"],components:{DashboardUpdateFile:Mt},watch:{productMainImg:function(){this.tempMainImg=this.productMainImg},productImgs:function(){this.tempImgs=this.productImgs}},emits:["updataImgDatas"],methods:{uploadNewImg:function(t){""===this.tempMainImg?this.tempMainImg=t:""===this.tempImgs[this.tempImgs.length-1]?this.tempImgs[this.tempImgs.length-1]=t:this.tempImgs.push(t),this.$emit("updataImgDatas",this.tempMainImg,this.tempImgs)},resetForm:function(){this.$refs.productImgsForm.resetForm()}}};_t.render=kt;var Vt=_t,Ct={name:"DashboardProductModal",props:["modalProduct","modalIsNew","modalBtnStatus"],data:function(){return{modal:"",newBtnStatus:Boolean,tempProduct:{title:"",category:"",unit:"",origin_price:1,price:1,imageUrl:""},isShow:!1}},watch:{modalProduct:function(){this.tempProduct=this.modalProduct,this.tempProduct.imagesUrl||(this.tempProduct.imagesUrl=[])},modalBtnStatus:function(){this.newBtnStatus=this.modalBtnStatus}},components:{DashboardRenderImgs:Vt},emits:["modalUpdateProduct"],methods:{openModal:function(){this.isShow=!1,this.modal.show()},hideModal:function(){this.modal.hide()},resetForm:function(){this.$refs.productForm.resetForm(),this.$refs.renderImg.resetForm()},updateImgs:function(t,e){this.tempProduct.imageUrl=t,this.tempProduct.imagesUrl=e,this.checkInputValue()},checkInputValue:function(){var t=this.tempProduct,e=t.title,c=t.category,o=t.unit,a=t.price,n=t.imageUrl;0!==this.tempProduct.origin_price&&0!==a||Object(D["f"])("價格不可小於 1","error"),""===e||""===c||""===o||""===this.tempProduct.origin_price||0===this.tempProduct.origin_price||""===a||0===a||""===n?this.newBtnStatus=!0:this.newBtnStatus=!1}},mounted:function(){this.modal=new Ot.a(this.$refs.modal)}};Ct.render=ft;var Ft=Ct,Nt={name:"DashboardProducts",data:function(){return{loadingStatus:!1,btnStatus:Boolean,productSelect:"",productSearch:"",productPagination:{},products:[],tempProduct:{},allProducts:[],filterDatas:[],isNew:Boolean,isPaginationShow:!0}},watch:{productSelect:function(){this.productSearch="","全部商品"!==this.productSelect?this.filterProducts.length>9?this.isPaginationShow=!0:this.isPaginationShow=!1:"全部商品"===this.productSelect&&""===this.productSearch&&(this.isPaginationShow=!0)},productSearch:function(){""!==this.productSearch?this.filterProducts.length>9?this.isPaginationShow=!0:this.isPaginationShow=!1:"全部商品"===this.productSelect&&""===this.productSearch&&(this.isPaginationShow=!0)}},computed:{filterProducts:function(){var t=[];return t="全部商品"===this.productSelect?this.products:this.checkProductSelect(),""!==this.productSearch&&(t=this.chechProductSearch()),t}},components:{DashboardLoading:M["a"],DashboardPagination:_["a"],DashboardProductModal:Ft},methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("toriha_vuetestapi","/admin/products?page=").concat(e);this.backTop(),this.loadingStatus=!0,this.$http.get(c).then((function(e){e.data.success?(t.products=e.data.products,t.productPagination=e.data.pagination,t.productPagination.total_pages>1&&""===t.productSearch&&"全部商品"===t.productSelect?t.isPaginationShow=!0:t.isPaginationShow=!1,t.loadingStatus=!1):(Object(D["d"])("產品資料取得失敗","請重新刷新頁面或使用重整按鈕"),t.loadingStatus=!1)})).catch((function(){Object(D["d"])("產品資料取得失敗","請重新刷新頁面或使用重整按鈕"),t.loadingStatus=!1}))},getAllProducts:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("toriha_vuetestapi","/admin/products/all");this.loadingStatus=!0,this.$http.get(e).then((function(e){e.data.success?(t.filterProduct(e.data.products),t.loadingStatus=!1):(Object(D["d"])("產品資料取得失敗","請重新刷新頁面或使用重整按鈕"),t.loadingStatus=!1)})).catch((function(){Object(D["d"])("產品資料取得失敗","請重新刷新頁面或使用重整按鈕"),t.loadingStatus=!1}))},filterProduct:function(t){var e=this,c=Object.keys(t);this.allProducts=[],c.forEach((function(c){e.allProducts.push(t[c])}))},delProduct:function(t){var e=this,c=t.id,o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("toriha_vuetestapi","/admin/product/").concat(c);this.loadingStatus=!0,this.$http.delete(o).then((function(t){t.data.success?(Object(D["f"])(t.data.message,"success"),e.getProducts(),e.getAllProducts(),e.loadingStatus=!1):(Object(D["f"])(t.data.message,"error"),e.loadingStatus=!1)})).catch((function(){Object(D["d"])("操作出現異常","請稍後再試"),e.loadingStatus=!1}))},delProductFn:function(t){Object(D["b"])(t,this.delProduct)},updateProduct:function(t){var e=this;this.loadingStatus=!0;var c="",o="";this.isNew?(c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("toriha_vuetestapi","/admin/product"),o="post"):(c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("toriha_vuetestapi","/admin/product/").concat(t.id),o="put"),this.$http[o](c,{data:t}).then((function(t){t.data.success?(Object(D["f"])(t.data.message,"success"),e.getProducts(),e.getAllProducts(),e.$refs.productModal.hideModal()):(Object(D["f"])(t.data.message,"error"),e.loadingStatus=!1)})).catch((function(){Object(D["d"])("操作出現異常","請稍後再試"),e.loadingStatus=!1}))},checkProductSelect:function(){var t=this;return this.filterDatas=this.allProducts.filter((function(e){return e.category.match(t.productSelect)})),this.filterDatas},chechProductSearch:function(){var t=this,e=[];return e="全部商品"===this.productSelect?this.allProducts.filter((function(e){return e.title.match(t.productSearch)})):this.filterDatas.filter((function(e){return e.title.match(t.productSearch)})),e},openModal:function(t,e){t?(this.isNew=!0,this.btnStatus=!0,this.$refs.productModal.resetForm(),this.tempProduct={title:"",category:"",unit:"",origin_price:1,price:1,imageUrl:""}):(this.isNew=!1,this.btnStatus=!1,this.tempProduct=JSON.parse(JSON.stringify(e))),this.$refs.productModal.openModal()},resetData:function(){Object(D["f"])("正在重整資料","info"),this.productSelect="全部商品",this.getProducts(),this.getAllProducts()},backTop:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0}},mounted:function(){this.backTop(),this.productSelect="全部商品",this.getProducts(),this.getAllProducts()}};Nt.render=U;e["default"]=Nt},a434:function(t,e,c){"use strict";var o=c("23e7"),a=c("23cb"),n=c("a691"),l=c("50c4"),i=c("7b0b"),s=c("65f0"),r=c("8418"),d=c("1dde"),u=d("splice"),h=Math.max,b=Math.min,m=9007199254740991,p="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!u},{splice:function(t,e){var c,o,d,u,f,g,O=i(this),j=l(O.length),v=a(t,j),w=arguments.length;if(0===w?c=o=0:1===w?(c=0,o=j-v):(c=w-2,o=b(h(n(e),0),j-v)),j+c-o>m)throw TypeError(p);for(d=s(O,o),u=0;u<o;u++)f=v+u,f in O&&r(d,u,O[f]);if(d.length=o,c<o){for(u=v;u<j-o;u++)f=u+o,g=u+c,f in O?O[g]=O[f]:delete O[g];for(u=j;u>j-o+c;u--)delete O[u-1]}else if(c>o)for(u=j-o;u>v;u--)f=u+o-1,g=u+c-1,f in O?O[g]=O[f]:delete O[g];for(u=0;u<c;u++)O[u+v]=arguments[u+2];return O.length=j-o+c,d}})},a640:function(t,e,c){"use strict";var o=c("d039");t.exports=function(t,e){var c=[][t];return!!c&&o((function(){c.call(null,e||function(){throw 1},1)}))}},b64b:function(t,e,c){var o=c("23e7"),a=c("7b0b"),n=c("df75"),l=c("d039"),i=l((function(){n(1)}));o({target:"Object",stat:!0,forced:i},{keys:function(t){return n(a(t))}})}}]);
//# sourceMappingURL=chunk-0e2d3c00.878ac38a.js.map